# **2022-23学年第1学期**

## **实 验 报 告**

![zucc](zucc.png)

- 课程名称: 软件体系结构与实践
- 实验项目: DDD
- 专业班级: 软件工程2003
- 学生学号: 32001272
- 学生姓名: 徐彬涵
- 实验指导教师: 郭鸣

### 【实验目的】

- 熟练掌握 DDD

### 【实验内容】

#### 1 阅读

[2021-04-20 DDD Overrated GOTOpia.pdf](2021-04-20 DDD Overrated GOTOpia.pdf)

[领域驱动设计 参考手册](dddref.md)  [DDD_Reference_2015-03.pdf](DDD_Reference_2015-03.pdf)

中台架构与实现：基于DDD和微服务，第二部分

#### 2 解释下面的概念

- 实体 

  ​	在DDD的领域模型中有这样一类对象，它们拥有唯一标识符，并且它们的标识符在历经各种状态变更后仍能保持一致。对这些对象而言，重要的不是属性，而是其延续性和标识，这种对象的延续性和标识会跨越甚至超出软件的生命周期。我们把领域模型中这样的领域对象称为实体。

- 值对象 

  ​	值对象是通过对象属性值来识别的对象，它将多个相关属性组合为一个概念整体，用于描述领域的某个特定方面，并且是一个没有标识符的对象。
  ​	也就是说，值对象描述了领域中的某一个东西，这个东西是不可变的，它将不同的关联属性组合成了一个概念整体。当度量和描述改变时，我们可以用另外一个值对象予以替换。它可以和其他值对象进行相等性比较，不过不是基于ID，而是基于值对象的属性。因为不可修改的特性，它不会对协作对象带来副作用。

  ​	简单来说，值对象本质是一个属性集合，那这个集合里面有什么呢？它们是若干个基于描述目的、具有整体概念和不可修改的属性，在应用运行时，我们主要关注这些属性集的“值”。这个集合存在的意义又是什么？在领域建模的过程中，值对象可以保证属性归类的清晰和概念的完整性，避免出现零碎的属性。值对象通过抽象或标准化设计，可以采用数据冗余的方式在不同的业务领域实现数据流转

- 聚合、聚合根

  ​	领域模型内的实体和值对象就类似这些组织中的个体，而能让实体和值对象协同工作的组织就是**聚合**。聚合内部有自己的业务规则，类似社团组织中的章程，所有成员必须遵守。有了这些业务规则就可以确保聚合内的这些领域对象，在实现聚合内的业务逻辑时，可以保证数据的一致性。

  ​	从技术的角度，你可以这么理解，**聚合**是由业务和逻辑紧密关联的实体和值对象组合而成的。聚合内数据的修改必须由聚合根统一组织，以确保每次数据修改都是按照聚合内统一的业务规则来完成，聚合是数据修改和持久化的基本单元

  ​	**聚合根**的主要目的是避免聚合内由于复杂数据模型缺少统一的业务规则控制，而导致聚合内实体和值对象等领域对象之间数据不一致性的问题。也就是说，在聚合根的方法或领域服务中可以用上这些业务规则，来确保聚合内数据变更时可以保持数据逻辑的一致性

  ​	**聚合根**管理了聚合内所有实体和值对象的生命周期，我们通过聚合根就可以获取到聚合内所有实体和值对象等领域对象。一般来说，如果聚合根被删除了，那么被它引用的实体和值对象也就不会存在了。

- 工厂 

  ​	为了让聚合根专注于领域模型，我们尽量将这些比较通用的，与领域模型业务逻辑无关的工作，从聚合根中剥离，将它们放到工厂中实现，通过工厂封装聚合内复杂对象的创建过程，完成聚合根、实体和值对象等DO对象的创建。这样也可以隐藏聚合内DO对象的创建过程，避免暴露聚合的内部结构

- 仓库 

  ​	DDD非常重视领域模型，领域层应该更多关注领域逻辑实现。为了解耦领域逻辑和数据处理逻辑，我们在领域层和基础层之间增加了薄薄的一层，这一层就是仓储。
  ​	仓储模式包含仓储接口和仓储实现，仓储接口面向领域层提供基础层数据处理相关的访问接口，仓储实现完成仓储接口对应的数据持久化相关的逻辑处理。一个聚合会有一个仓储，统一由仓储来完成聚合数据的持久化

- 领域事件

  ​	领域事件是领域模型非常重要的一部分，用于表示领域中发生的事件。一个领域事件往往会导致进一步的业务操作，它在实现领域模型解耦的同时，还有助于形成完整的业务操作闭环

- 受限上下文的概念

  ​	“限界”是指具体的领域边界，而“上下文”则是业务语义所在的上下文环境。通过限定领域的上下文边界，项目团队就可以在这个特定的业务边界内用无歧义的通用语言进行交流了。

  ​	限界上下文就是在限定的上下文环境内，用来封装通用语言和领域对象，保证领域内的一些术语、领域对象等有一个确切的含义，没有语义二义性的一个业务边界。

微服务架构设计模式，第5章

#### 3 阅读  demo 程序  [从壹开始DDD](https://www.cnblogs.com/laozhang-is-phi/p/9806335.html)

- 找到上面DDD 概念对应的代码

- 在你的大作业里面实践 DDD
  
  - 建立领域模型
    
    - 找出实体，值对象，聚合，聚合根
    - 找出受限上下文
    - 建立工厂、仓库
    - 找出领域事件
  
- 最少一个模块使用该方法设计

#### ~~ 报名参加 翻译 校对~~

- ~~translate 目录 用 F# DDD设计~~
- ~~期末附加评分~~

### 【实验报告要求】

1. 作业文档、源程序 提交至 bb
2. Markdown 完成作业，包括正确的格式
3. 实验中碰到的问题和心得体会写在此处

### 【参考资源】
